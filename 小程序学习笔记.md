# 文件

### app.json

![image-20200103153929028](C:\Users\GiannisChen\AppData\Roaming\Typora\typora-user-images\image-20200103153929028.png)

|      属性       |     类型     |                             描述                             |
| :-------------: | :----------: | :----------------------------------------------------------: |
|      pages      | String Array | 必填，记录小程序所有页面的路径地址，多个地址时候将默认第一个为小程序初始界面 |
|     window      |    Object    |                   可选，用于设置页面GUI：                    |
|     tabBar      |    Object    |              可选，设置页面底部tab工具条的表现               |
| network Timeout |    Object    |               可选，这只各种网络请求的超时时间               |
|      debug      |   Boolean    |                     用于是否开启调试模式                     |

##### window内容

|             属性             |   类型   | 默认值  |              描述               |
| :--------------------------: | :------: | :-----: | :-----------------------------: |
| navigationBarBackgroundColor | HexColor | #000000 |         导航栏背景颜色          |
|    navigationBarTextStyle    |  String  |  white  |         导航栏标题颜色          |
|    navigationBarTitleText    |  String  |         |         导航栏标题文字          |
|       navigationStyle        |  String  | default | 导航栏样式（default or custom） |
|     backgroundTextStyle      |  String  |  dark   | 下拉加载的样式（dark or light） |
|       backgroundColor        | HexColor | #ffffff |          窗口背景颜色           |
|      backgroundColorTop      |  String  | #ffffff |    顶部窗口颜色（iOS only）     |
|    backgroundColorBottom     |  String  | #ffffff |    底部窗口颜色（iOS only）     |
|    enablePullDownRefresh     | Boolean  |  false  |        是否开启下拉刷新         |
|    onReachBottomDistance     |  Number  |   50    |    页面上拉触底事件触发距离     |

##### tabBar内容

![image-20200103163115202](C:\Users\GiannisChen\AppData\Roaming\Typora\typora-user-images\image-20200103163115202.png)

###### tabBar项

|      属性       |   类型   | 必填 | 默认值 |              描述               |
| :-------------: | :------: | :--: | :----: | :-----------------------------: |
|      color      | HexColor | 必填 |        |         tab文字默认颜色         |
|  selectedColor  | HexColor | 必填 |        |        tab文字选中时颜色        |
| backgroundColor | HexColor | 必填 |        |           tab背景颜色           |
|   borderStyle   |  String  | 可选 | black  | tab上边框颜色（black or white） |
|      list       |  Array   | 必填 |        |             tab列表             |
|    position     |  String  | 可选 | bottom |   tabBar位置（top or bottom）   |

###### list项

|       属性       |  类型  | 必填 |        描述        |
| :--------------: | :----: | :--: | :----------------: |
|     pagePath     | String | 必填 | 页面路径（已定义） |
|       text       | String | 必填 |    tab按键文字     |
|     iconPath     | String | 可选 |      图标路径      |
| selectedIconPath | String | 可选 |   选中时图标路径   |

### 其他.json

|             属性             |   类型   | 默认值  |                   描述                    |
| :--------------------------: | :------: | :-----: | :---------------------------------------: |
| navigationBarBackgroundColor | HexColor | #000000 |              导航栏背景颜色               |
|    navigationBarTextStyle    |  String  |  white  |              导航栏标题颜色               |
|    navigationBarTitleText    |  String  |         |              导航栏标题文字               |
|     backgroundTextStyle      |  String  |  dark   |      下拉加载的样式（dark or light）      |
|       backgroundColor        | HexColor | #ffffff |               窗口背景颜色                |
|    enablePullDownRefresh     | Boolean  |  false  |             是否开启下拉刷新              |
|    onReachBottomDistance     |  Number  |   50    |         页面上拉触底事件触发距离          |
|        disableScroll         | Boolean  |  false  | 单独设置true（无法下拉）、false（可下拉） |

# 框架

### 逻辑层

#### 注册程序

##### app()方法

|       属性       |   类型   |                描述                |       触发时机       |       备注       |
| :--------------: | :------: | :--------------------------------: | :------------------: | :--------------: |
|    onLaunch()    | Function | 监听小程序的初始化（生命周期函数） |        初始化        |  全局只触发1次   |
|     onShow()     | Function |  监听小程序的显示（生命周期函数）  |  启动/后台进入前台   |                  |
|     onHide()     | Function |  监听小程序的隐藏（生命周期函数）  |     前台进入后台     |                  |
|    onError()     | Function |            错误监听函数            | 脚本错误/API调用失败 |                  |
| omPageNotFound() | Function |           页面不存在函数           |  需打开的页面不存在  |                  |
|  其他自定义参数  |   Any    |          开发者自定义函数          |                      | 通过this函数触发 |

##### onLaunch() & onShow()方法

![image-20200103213012114](C:\Users\GiannisChen\AppData\Roaming\Typora\typora-user-images\image-20200103213012114.png)

###### 函数返回值

|          字段          |  类型  |                             说明                             |
| :--------------------: | :----: | :----------------------------------------------------------: |
|          path          | String |                       打开小程序的路径                       |
|         query          | Object |                      打开小程序的query                       |
|         scene          | Number |                      打开小程序的场景值                      |
|      shareTicket       | String | 小程序被转发时生成一个shareTicket，打开被转发的小程序页面可以获取该函数 |
|      referrerInfo      | Object |      当场景为从另一个小程序/公众号/App打开时返回此字段       |
|   referrerInfo.appId   | String |               跳转前的小程序/公众号/App的appId               |
| referrerInfo.extraData | Object |     跳转前的小程序传来的数据，当scene=1037/1038时才支持      |

###### 支持返回referrerInfo.appId的场景值

| 场景值 |             场景              |    appId信息的含义    |
| :----: | :---------------------------: | :-------------------: |
|  1020  | 公众号profile页相关小程序列表 | 返回来源公众号的appId |
|  1035  |       公众号自定义菜单        | 返回来源公众号的appId |
|  1036  |        App分享消息卡片        |  返回来源应用的appId  |
|  1037  |       小程序打开小程序        | 返回来源小程序的appId |
|  1038  |      从另一个小程序返回       | 返回来源小程序的appId |
|  1043  |        公众号模板信息         | 返回来源公众号的appId |

##### onPageNotFound()方法

|    字段     |  类型   |                             说明                             |
| :---------: | :-----: | :----------------------------------------------------------: |
|    path     | String  |                       不存在页面的路径                       |
|    query    | Object  |                    打开不存在页面的query                     |
| isEntryPage | Boolean | 是否为本次启动的首个页面（如：从分享点进来，则首个页面则是配置的分享页面） |

#### 注册页面

##### Page(OBJECT)方法

###### OBJECT参数

|        属性         |   类型   |                             说明                             |
| :-----------------: | :------: | :----------------------------------------------------------: |
|        data         |  object  |                        页面的初始数据                        |
|      onLoad()       | Function |                 监听页面加载（生命周期函数）                 |
|      onReady()      | Function |             监听页面初次渲染完成（生命周期函数）             |
|      onShow()       | Function |                监听页面的显示（生命周期函数）                |
|      onHide()       | Function |                监听页面的隐藏（生命周期函数）                |
|     onUnload()      | Function |                监听页面的卸载（生命周期函数）                |
| onPullDownRefresh() | Function |          监听用户的下拉动作（页面相关事件处理函数）          |
|   onReachBottom()   | Function |                    页面上拉触底事件的处理                    |
| onShareAppMessage() | Function |                      用户单机右上角转发                      |
|   onPageScroll()    | Function |                    页面滚动触发事件的处理                    |
|   onTabItemTap()    | Function |                 若当前是tab页，单机tab时触发                 |
|      其他函数       |   Any    | 开发者可以添加任意函数或数据到OBJECT参数中，在页面的函数中用this可以访问 |

###### 初始数据

在data内部定义一系列的常量，留待WXML文件对它的调用；

###### 生命周期函数

见上表；

###### 页面事件处理函数

- onPullDownRefresh()
- onReachBottom()
- onShareAppMessage(OBJECT)
- onPageScroll(OBJECT)